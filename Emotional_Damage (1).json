{"last_node_id":181,"last_link_id":306,"nodes":[{"id":101,"type":"CLIPTextEncode","pos":[5050,-40],"size":{"0":210,"1":76.00001525878906},"flags":{},"order":48,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":155}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[156,157],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#222"},{"id":89,"type":"IPAdapterApply","pos":[990,-890],"size":{"0":215.79495239257812,"1":258},"flags":{},"order":32,"mode":0,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":128,"slot_index":0},{"name":"clip_vision","type":"CLIP_VISION","link":129,"slot_index":1},{"name":"image","type":"IMAGE","link":301,"slot_index":2},{"name":"model","type":"MODEL","link":189},{"name":"attn_mask","type":"MASK","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[299],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterApply"},"widgets_values":[0.7000000000000001,0.2,"original",0.501,0.7000000000000001,false],"color":"#233","bgcolor":"#355"},{"id":124,"type":"GroundingDinoSAMSegment (segment anything)","pos":[2830,1360],"size":{"0":360,"1":122},"flags":{},"order":28,"mode":0,"inputs":[{"name":"sam_model","type":"SAM_MODEL","link":204},{"name":"grounding_dino_model","type":"GROUNDING_DINO_MODEL","link":205,"slot_index":1},{"name":"image","type":"IMAGE","link":292},{"name":"prompt","type":"STRING","link":212,"widget":{"name":"prompt"},"slot_index":3}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[209],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[239],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"GroundingDinoSAMSegment (segment anything)"},"widgets_values":["Face",0.3],"color":"#332922","bgcolor":"#593930"},{"id":132,"type":"PrimitiveNode","pos":[2560,1320],"size":{"0":210,"1":58},"flags":{},"order":0,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[212],"widget":{"name":"prompt"},"slot_index":0}],"title":"What to select (Segment)","properties":{"Run widget replace on values":false},"widgets_values":["Face"],"color":"#332922","bgcolor":"#593930"},{"id":162,"type":"PreviewImage","pos":[2430,-1050],"size":{"0":210,"1":246},"flags":{},"order":45,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":262}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":163,"type":"PreviewImage","pos":[2860,-1050],"size":{"0":210,"1":246},"flags":{},"order":46,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":278}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":141,"type":"GrowMaskWithBlur","pos":[3250,1190],"size":{"0":315,"1":222},"flags":{},"order":36,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":239}],"outputs":[{"name":"mask","type":"MASK","links":[242,243],"shape":3,"slot_index":0},{"name":"mask_inverted","type":"MASK","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[10,0,true,false,3,1,1],"color":"#332922","bgcolor":"#593930"},{"id":169,"type":"Canny","pos":[2810,-1580],"size":{"0":315,"1":82},"flags":{},"order":39,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":277}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[278,279],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Canny"},"widgets_values":[0.1,0.25],"color":"#332922","bgcolor":"#593930"},{"id":103,"type":"Reroute","pos":[4910,-400],"size":[75,26],"flags":{},"order":59,"mode":0,"inputs":[{"name":"","type":"*","link":165}],"outputs":[{"name":"","type":"IMAGE","links":[166,167],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":65,"type":"BboxDetectorSEGS","pos":[5300,-510],"size":{"0":210,"1":212.00003051757812},"flags":{},"order":60,"mode":0,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":90},{"name":"image","type":"IMAGE","link":166},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null}],"outputs":[{"name":"SEGS","type":"SEGS","links":[93],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BboxDetectorSEGS"},"widgets_values":[0.5,10,3,10,"all"],"color":"#232","bgcolor":"#353"},{"id":47,"type":"FlatLatentsIntoSingleGrid","pos":[4330,-140],"size":{"0":210,"1":26},"flags":{},"order":56,"mode":0,"inputs":[{"name":"latents","type":"LATENT","link":73}],"outputs":[{"name":"LATENT","type":"LATENT","links":[67],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"FlatLatentsIntoSingleGrid"},"color":"#323","bgcolor":"#535"},{"id":27,"type":"ToStringList","pos":[1780,-190],"size":{"0":240,"1":120},"flags":{},"order":23,"mode":0,"inputs":[{"name":"string_1","type":"STRING","link":24},{"name":"string_2","type":"STRING","link":25},{"name":"string_3","type":"STRING","link":27,"slot_index":2},{"name":"string_4","type":"STRING","link":26}],"outputs":[{"name":"STRING","type":"STRING","links":[28],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"ToStringList"},"widgets_values":[4],"color":"#232","bgcolor":"#353"},{"id":25,"type":"ConcatStringSingle","pos":[1780,0],"size":{"0":243.60000610351562,"1":54},"flags":{},"order":27,"mode":0,"inputs":[{"name":"string_a","type":"STRING","link":28,"widget":{"name":"string_a"}},{"name":"string_b","type":"STRING","link":23,"widget":{"name":"string_b"},"slot_index":1}],"outputs":[{"name":"STRING","type":"STRING","links":[31,283],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ConcatStringSingle"},"widgets_values":["",""],"color":"#232","bgcolor":"#353"},{"id":36,"type":"AB SamplerCustom (experimental)","pos":[3850,-10],"size":{"0":355.20001220703125,"1":354},"flags":{},"order":54,"mode":0,"inputs":[{"name":"sampler","type":"SAMPLER","link":38},{"name":"latent_image","type":"LATENT","link":236},{"name":"sigmasA","type":"SIGMAS","link":40},{"name":"sigmasB","type":"SIGMAS","link":41},{"name":"modelA","type":"MODEL","link":287},{"name":"positive_A","type":"CONDITIONING","link":269},{"name":"negative_A","type":"CONDITIONING","link":270},{"name":"positive_B","type":"CONDITIONING","link":48},{"name":"negative_B","type":"CONDITIONING","link":49,"slot_index":8},{"name":"modelB","type":"MODEL","link":null,"slot_index":9},{"name":"roi_mask","type":"MASK","link":243},{"name":"noise_seed","type":"INT","link":88,"widget":{"name":"noise_seed"}}],"outputs":[{"name":"output","type":"LATENT","links":[],"shape":3,"slot_index":0},{"name":"denoised_output","type":"LATENT","links":[72],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"AB SamplerCustom (experimental)"},"widgets_values":[true,340348913784272,"randomize",6.5,6.5],"color":"#2a363b","bgcolor":"#3f5159"},{"id":31,"type":"CLIPTextEncode","pos":[1770,110],"size":{"0":240,"1":54},"flags":{},"order":43,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":285},{"name":"text","type":"STRING","link":31,"widget":{"name":"text"}}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[267],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":84,"type":"CLIPVisionLoader","pos":[940,-1040],"size":{"0":315,"1":58},"flags":{"pinned":false},"order":1,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[129],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["SD1.5/CLIP-ViT-H-14-laion2B-s32B-b79K.safetensors"],"color":"#233","bgcolor":"#355"},{"id":125,"type":"SAMModelLoader (segment anything)","pos":[2820,1120],"size":{"0":380,"1":60},"flags":{},"order":2,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[204],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SAMModelLoader (segment anything)"},"widgets_values":["sam_hq_vit_h (2.57GB)"],"color":"#332922","bgcolor":"#593930"},{"id":123,"type":"GroundingDinoModelLoader (segment anything)","pos":[2820,1240],"size":{"0":380,"1":60},"flags":{},"order":3,"mode":0,"outputs":[{"name":"GROUNDING_DINO_MODEL","type":"GROUNDING_DINO_MODEL","links":[205],"shape":3}],"properties":{"Node name for S&R":"GroundingDinoModelLoader (segment anything)"},"widgets_values":["GroundingDINO_SwinT_OGC (694MB)"],"color":"#332922","bgcolor":"#593930"},{"id":67,"type":"UltralyticsDetectorProvider","pos":[5270,-660],"size":{"0":315,"1":78},"flags":{},"order":4,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[90],"shape":3,"slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null,"shape":3}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"],"color":"#232","bgcolor":"#353"},{"id":150,"type":"ControlNetLoaderAdvanced","pos":[2350,-1400],"size":{"0":367.79998779296875,"1":58},"flags":{},"order":5,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[249],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11f1p_sd15_depth.pth"],"color":"#332922","bgcolor":"#593930"},{"id":152,"type":"ControlNetLoaderAdvanced","pos":[2780,-1390],"size":{"0":367.79998779296875,"1":58},"flags":{},"order":6,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[253],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11p_sd15_canny.pth"],"color":"#332922","bgcolor":"#593930"},{"id":30,"type":"String","pos":[1320,250],"size":{"0":358.5333251953125,"1":58},"flags":{},"order":7,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[26],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"String"},"widgets_values":["(very angry, frowning:1.3); "],"color":"#232","bgcolor":"#353"},{"id":157,"type":"LeReS-DepthMapPreprocessor","pos":[2360,-1620],"size":{"0":369.6000061035156,"1":130},"flags":{},"order":38,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":272}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[250,262],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LeReS-DepthMapPreprocessor"},"widgets_values":[0.6000000000000001,0,"disable",512],"color":"#332922","bgcolor":"#593930"},{"id":167,"type":"Reroute","pos":[2250,-1570],"size":[75,26],"flags":{},"order":33,"mode":0,"inputs":[{"name":"","type":"*","link":302}],"outputs":[{"name":"","type":"IMAGE","links":[272,277],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":37,"type":"VAEDecode","pos":[4330,-70],"size":{"0":210,"1":46},"flags":{},"order":57,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":67,"slot_index":0},{"name":"vae","type":"VAE","link":289,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[68,165],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"},"color":"#323","bgcolor":"#535"},{"id":11,"type":"KSamplerSelect","pos":[3420,280],"size":{"0":315,"1":58},"flags":{},"order":8,"mode":0,"outputs":[{"name":"SAMPLER","type":"SAMPLER","links":[38],"shape":3}],"properties":{"Node name for S&R":"KSamplerSelect"},"widgets_values":["dpmpp_2s_ancestral"],"color":"#223","bgcolor":"#335"},{"id":26,"type":"String","pos":[1320,-90],"size":{"0":360,"1":60},"flags":{},"order":9,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[24],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"String"},"widgets_values":["(relaxed neutral expression:1.1); "],"color":"#232","bgcolor":"#353"},{"id":171,"type":"ShowText|pysssss","pos":[1750,220],"size":{"0":314.455810546875,"1":292.8775634765625},"flags":{},"order":34,"mode":0,"inputs":[{"name":"text","type":"STRING","link":283,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6}],"properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","(relaxed neutral expression:1.1); face shot of person looking at the camera","(big smile with teeth showing:1.2); face shot of person looking at the camera","(eyes closed:1.1),(sad face:1.1);face shot of person looking at the camera","(very angry, frowning:1.3); face shot of person looking at the camera"],"color":"#222"},{"id":18,"type":"Text Multiline","pos":[1290,-270],"size":{"0":420,"1":100},"flags":{},"order":10,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[23],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["face shot of person looking at the camera"],"color":"#232","bgcolor":"#353"},{"id":172,"type":"Note","pos":[3850,-1050],"size":{"0":456.2312316894531,"1":269.3837890625},"flags":{},"order":11,"mode":0,"title":"#NeuraLunk info & more FREE workflows","properties":{"text":""},"widgets_values":["CREDITS to...\nAll those who create amazing Models and Lora's, controlnet and so on ....\nAll the fine people working on ComfyUI itself,\nand the amazing creators of Custom-Nodes that make all this possible !\n\na ComfyUI Workflow by: MrLunk / #NeuraLunk\nFor: OpenArt.ai \n\nMy Facebook page:\nhttps://www.facebook.com/NeuraLunk \n\n--->> FREE downloadable:\n350+ of my Workflows and art-pieces:\n\nLink:\nhttps://openart.ai/profile/neuralunk\n\nGreetz, Be well and Happy !\nPeter Lunk "],"color":"#148327","bgcolor":"#006f13"},{"id":7,"type":"CLIPTextEncode","pos":[1650,600],"size":{"0":420,"1":100},"flags":{},"order":44,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":296}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[268],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark"],"color":"#322","bgcolor":"#533"},{"id":142,"type":"Convert Masks to Images","pos":[3590,1500],"size":{"0":210,"1":26},"flags":{"collapsed":false},"order":40,"mode":0,"inputs":[{"name":"masks","type":"MASK","link":242}],"outputs":[{"name":"IMAGES","type":"IMAGE","links":[226],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Convert Masks to Images"},"color":"#332922","bgcolor":"#593930"},{"id":143,"type":"PreviewImage","pos":[3590,1580],"size":{"0":210,"1":246},"flags":{},"order":47,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":226}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#332922","bgcolor":"#593930"},{"id":130,"type":"PreviewImage","pos":[3340,1580],"size":{"0":210,"1":246},"flags":{},"order":35,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":209}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#332922","bgcolor":"#593930"},{"id":144,"type":"PreviewImage","pos":[3070,1580],"size":{"0":210,"1":246},"flags":{},"order":29,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":293}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#332922","bgcolor":"#593930"},{"id":111,"type":"PreviewImage","pos":[510,1160],"size":{"0":597.2035522460938,"1":643.8142700195312},"flags":{},"order":24,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":197}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#222","bgcolor":"#000"},{"id":4,"type":"CheckpointLoaderSimple","pos":[330,-610],"size":{"0":398.9843444824219,"1":103.16336822509766},"flags":{},"order":12,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[189],"slot_index":0},{"name":"CLIP","type":"CLIP","links":[106],"slot_index":1},{"name":"VAE","type":"VAE","links":[107],"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["realisticVisionV51_v51VAE.safetensors"],"color":"#223","bgcolor":"#335"},{"id":85,"type":"IPAdapterModelLoader","pos":[940,-1150],"size":{"0":315,"1":58},"flags":{"pinned":false},"order":13,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[128],"shape":3}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter_sd15.safetensors"],"color":"#233","bgcolor":"#355"},{"id":58,"type":"ImageScale","pos":[490,960],"size":{"0":260,"1":130},"flags":{},"order":22,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":200}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[197,291,300],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"center"],"color":"#223","bgcolor":"#335"},{"id":153,"type":"ControlNetApplyAdvanced","pos":[2810,-1280],"size":{"0":315,"1":166},"flags":{},"order":53,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":251},{"name":"negative","type":"CONDITIONING","link":252},{"name":"control_net","type":"CONTROL_NET","link":253},{"name":"image","type":"IMAGE","link":279}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[269],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[270],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.4,0,1],"color":"#332922","bgcolor":"#593930"},{"id":151,"type":"ControlNetApplyAdvanced","pos":[2370,-1280],"size":{"0":315,"1":166},"flags":{},"order":50,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":267},{"name":"negative","type":"CONDITIONING","link":268},{"name":"control_net","type":"CONTROL_NET","link":249},{"name":"image","type":"IMAGE","link":250}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[251],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[252],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.6,0,1],"color":"#332922","bgcolor":"#593930"},{"id":66,"type":"DetailerForEach","pos":[5300,-220],"size":{"0":315,"1":898},"flags":{},"order":61,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":167,"slot_index":0},{"name":"segs","type":"SEGS","link":93},{"name":"model","type":"MODEL","link":171},{"name":"clip","type":"CLIP","link":172},{"name":"vae","type":"VAE","link":173},{"name":"positive","type":"CONDITIONING","link":156},{"name":"negative","type":"CONDITIONING","link":157},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[98],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"DetailerForEach"},"widgets_values":[768,true,1024,356926610714326,"randomize",27,7,"dpmpp_2s_ancestral","karras",0.25,5,true,false,"",1,false,10],"color":"#232","bgcolor":"#353"},{"id":179,"type":"Note","pos":[3850,-1330],"size":{"0":433.08197021484375,"1":211.1002655029297},"flags":{},"order":14,"mode":0,"properties":{"text":""},"widgets_values":["This workflow was based on an idea/ workflow by OpenArt user @Bmad.\nCredits to him for bringing this idea to my attention !!!\n\nLink original:\nhttps://openart.ai/workflows/bmad/facial-expressions-experimental/L4UKIFGh2JwVZ5Pny8a6\n\nI have added Ip Adapter for more consistency in the face.\nI added a Mask generator based on segmenting by keyword.\nAllso added 2 Controlnets for Depth and Canny.\nAdded a refiner at the end to smooth it all out.\n\nEnjoy !\n\nSincerely,\nPeter Lunk a.k.a. #NeuraLunk.\n\n"],"color":"#432","bgcolor":"#653"},{"id":28,"type":"String","pos":[1320,30],"size":{"0":360,"1":60},"flags":{},"order":15,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[25],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"String"},"widgets_values":["(big smile with teeth showing:1.2); "],"color":"#232","bgcolor":"#353"},{"id":38,"type":"PreviewImage","pos":[4270,340],"size":{"0":460,"1":520},"flags":{},"order":58,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":68}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":10,"type":"PreviewImage","pos":[5480,960],"size":{"0":457.34320068359375,"1":537.8402099609375},"flags":{},"order":31,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":303}],"title":"Original image","properties":{"Node name for S&R":"PreviewImage"}},{"id":70,"type":"SaveImage","pos":[5970,950],"size":{"0":850,"1":950},"flags":{},"order":62,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":98,"slot_index":0}],"properties":{},"widgets_values":["Photobooth-"]},{"id":174,"type":"Bus Node","pos":[3030,-430],"size":{"0":216.59999084472656,"1":126},"flags":{},"order":49,"mode":0,"inputs":[{"name":"bus","type":"BUS","link":306},{"name":"model","type":"MODEL","link":null},{"name":"clip","type":"CLIP","link":null},{"name":"vae","type":"VAE","link":null},{"name":"positive","type":"CONDITIONING","link":null},{"name":"negative","type":"CONDITIONING","link":null,"slot_index":5}],"outputs":[{"name":"bus","type":"BUS","links":[],"shape":3,"slot_index":0},{"name":"model","type":"MODEL","links":[287],"shape":3,"slot_index":1},{"name":"clip","type":"CLIP","links":[290],"shape":3,"slot_index":2},{"name":"vae","type":"VAE","links":[288,289],"shape":3,"slot_index":3},{"name":"positive","type":"CONDITIONING","links":null,"shape":3},{"name":"negative","type":"CONDITIONING","links":null,"shape":3}],"properties":{"Node name for S&R":"Bus Node"}},{"id":72,"type":"Bus Node","pos":[1300,-640],"size":{"0":216.59999084472656,"1":126},"flags":{},"order":37,"mode":0,"inputs":[{"name":"bus","type":"BUS","link":null},{"name":"model","type":"MODEL","link":299},{"name":"clip","type":"CLIP","link":106},{"name":"vae","type":"VAE","link":107},{"name":"positive","type":"CONDITIONING","link":null},{"name":"negative","type":"CONDITIONING","link":null}],"outputs":[{"name":"bus","type":"BUS","links":[163,305],"shape":3,"slot_index":0},{"name":"model","type":"MODEL","links":[],"shape":3,"slot_index":1},{"name":"clip","type":"CLIP","links":[285,296],"shape":3,"slot_index":2},{"name":"vae","type":"VAE","links":[],"shape":3,"slot_index":3},{"name":"positive","type":"CONDITIONING","links":null,"shape":3},{"name":"negative","type":"CONDITIONING","links":null,"shape":3}],"properties":{"Node name for S&R":"Bus Node"}},{"id":181,"type":"Reroute","pos":[2860,-650],"size":[75,26],"flags":{},"order":42,"mode":0,"inputs":[{"name":"","type":"*","link":305}],"outputs":[{"name":"","type":"BUS","links":[306],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":178,"type":"Reroute","pos":[840,-940],"size":[75,26],"flags":{},"order":26,"mode":0,"inputs":[{"name":"","type":"*","link":300}],"outputs":[{"name":"","type":"IMAGE","links":[301,302],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":175,"type":"Reroute","pos":[2240,960],"size":[75,26],"flags":{},"order":25,"mode":0,"inputs":[{"name":"","type":"*","link":291}],"outputs":[{"name":"","type":"IMAGE","links":[292,293,297,303],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":56,"type":"LoadImage","pos":[-320,970],"size":{"0":760,"1":850},"flags":{},"order":16,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[200],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00043_.png","image"],"color":"#ff9494","bgcolor":"#ff8080"},{"id":119,"type":"Note","pos":[420,-740],"size":{"0":210,"1":58},"flags":{},"order":17,"mode":0,"properties":{"text":""},"widgets_values":["Model download:\n\nhttps://civitai.com/models/4201"],"color":"#432","bgcolor":"#653"},{"id":73,"type":"Bus Node","pos":[4950,-650],"size":{"0":216.59999084472656,"1":126},"flags":{},"order":41,"mode":0,"inputs":[{"name":"bus","type":"BUS","link":163},{"name":"model","type":"MODEL","link":null},{"name":"clip","type":"CLIP","link":null},{"name":"vae","type":"VAE","link":null},{"name":"positive","type":"CONDITIONING","link":null},{"name":"negative","type":"CONDITIONING","link":null}],"outputs":[{"name":"bus","type":"BUS","links":null,"shape":3,"slot_index":0},{"name":"model","type":"MODEL","links":[171],"shape":3,"slot_index":1},{"name":"clip","type":"CLIP","links":[155,172],"shape":3,"slot_index":2},{"name":"vae","type":"VAE","links":[173],"shape":3,"slot_index":3},{"name":"positive","type":"CONDITIONING","links":[],"shape":3,"slot_index":4},{"name":"negative","type":"CONDITIONING","links":[],"shape":3,"slot_index":5}],"properties":{"Node name for S&R":"Bus Node"}},{"id":29,"type":"String","pos":[1320,180],"size":{"0":360,"1":60},"flags":{},"order":18,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[27],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"String"},"widgets_values":["(eyes closed:1.1),(sad face:1.1);"],"color":"#232","bgcolor":"#353"},{"id":13,"type":"KarrasScheduler","pos":[3430,610],"size":{"0":315,"1":130},"flags":{},"order":19,"mode":0,"outputs":[{"name":"SIGMAS","type":"SIGMAS","links":[41],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KarrasScheduler"},"widgets_values":[12,0.6499999999999999,0.0291675,7],"color":"#223","bgcolor":"#335"},{"id":12,"type":"KarrasScheduler","pos":[3430,400],"size":{"0":315,"1":130},"flags":{},"order":20,"mode":0,"outputs":[{"name":"SIGMAS","type":"SIGMAS","links":[40],"shape":3}],"properties":{"Node name for S&R":"KarrasScheduler"},"widgets_values":[6,2.260000000000011,0.030000000000000006,7],"color":"#223","bgcolor":"#335"},{"id":57,"type":"VAEEncode","pos":[3250,10],"size":{"0":210,"1":46},"flags":{},"order":52,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":298},{"name":"vae","type":"VAE","link":288}],"outputs":[{"name":"LATENT","type":"LATENT","links":[236],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"},"color":"#323","bgcolor":"#535"},{"id":177,"type":"Reroute","pos":[3030,10],"size":[75,26],"flags":{},"order":30,"mode":0,"inputs":[{"name":"","type":"*","link":297}],"outputs":[{"name":"","type":"IMAGE","links":[298],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":35,"type":"CLIPTextEncode","pos":[3210,140],"size":{"0":295.9546203613281,"1":76},"flags":{},"order":51,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":290,"slot_index":0}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[48,49],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":62,"type":"CR Seed","pos":[3860,-298],"size":{"0":315,"1":102},"flags":{},"order":21,"mode":0,"outputs":[{"name":"seed","type":"INT","links":[88],"shape":3,"slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR Seed"},"widgets_values":[1787556597977,"randomize"],"color":"#432","bgcolor":"#653"},{"id":50,"type":"RebatchLatents","pos":[4330,-250],"size":{"0":210,"1":58},"flags":{},"order":55,"mode":0,"inputs":[{"name":"latents","type":"LATENT","link":72}],"outputs":[{"name":"LATENT","type":"LATENT","links":[73],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchLatents"},"widgets_values":[4],"color":"#323","bgcolor":"#535"}],"links":[[23,18,0,25,1,"STRING"],[24,26,0,27,0,"STRING"],[25,28,0,27,1,"STRING"],[26,30,0,27,3,"STRING"],[27,29,0,27,2,"STRING"],[28,27,0,25,0,"STRING"],[31,25,0,31,1,"STRING"],[38,11,0,36,0,"SAMPLER"],[40,12,0,36,2,"SIGMAS"],[41,13,0,36,3,"SIGMAS"],[48,35,0,36,7,"CONDITIONING"],[49,35,0,36,8,"CONDITIONING"],[67,47,0,37,0,"LATENT"],[68,37,0,38,0,"IMAGE"],[72,36,1,50,0,"LATENT"],[73,50,0,47,0,"LATENT"],[88,62,0,36,11,"INT"],[90,67,0,65,0,"BBOX_DETECTOR"],[93,65,0,66,1,"SEGS"],[98,66,0,70,0,"IMAGE"],[106,4,1,72,2,"CLIP"],[107,4,2,72,3,"VAE"],[128,85,0,89,0,"IPADAPTER"],[129,84,0,89,1,"CLIP_VISION"],[155,73,2,101,0,"CLIP"],[156,101,0,66,5,"CONDITIONING"],[157,101,0,66,6,"CONDITIONING"],[163,72,0,73,0,"BUS"],[165,37,0,103,0,"*"],[166,103,0,65,1,"IMAGE"],[167,103,0,66,0,"IMAGE"],[171,73,1,66,2,"MODEL"],[172,73,2,66,3,"CLIP"],[173,73,3,66,4,"VAE"],[189,4,0,89,3,"MODEL"],[197,58,0,111,0,"IMAGE"],[200,56,0,58,0,"IMAGE"],[204,125,0,124,0,"SAM_MODEL"],[205,123,0,124,1,"GROUNDING_DINO_MODEL"],[209,124,0,130,0,"IMAGE"],[212,132,0,124,3,"STRING"],[226,142,0,143,0,"IMAGE"],[236,57,0,36,1,"LATENT"],[239,124,1,141,0,"MASK"],[242,141,0,142,0,"MASK"],[243,141,0,36,10,"MASK"],[249,150,0,151,2,"CONTROL_NET"],[250,157,0,151,3,"IMAGE"],[251,151,0,153,0,"CONDITIONING"],[252,151,1,153,1,"CONDITIONING"],[253,152,0,153,2,"CONTROL_NET"],[262,157,0,162,0,"IMAGE"],[267,31,0,151,0,"CONDITIONING"],[268,7,0,151,1,"CONDITIONING"],[269,153,0,36,5,"CONDITIONING"],[270,153,1,36,6,"CONDITIONING"],[272,167,0,157,0,"IMAGE"],[277,167,0,169,0,"IMAGE"],[278,169,0,163,0,"IMAGE"],[279,169,0,153,3,"IMAGE"],[283,25,0,171,0,"STRING"],[285,72,2,31,0,"CLIP"],[287,174,1,36,4,"MODEL"],[288,174,3,57,1,"VAE"],[289,174,3,37,1,"VAE"],[290,174,2,35,0,"CLIP"],[291,58,0,175,0,"*"],[292,175,0,124,2,"IMAGE"],[293,175,0,144,0,"IMAGE"],[296,72,2,7,0,"CLIP"],[297,175,0,177,0,"*"],[298,177,0,57,0,"IMAGE"],[299,89,0,72,1,"MODEL"],[300,58,0,178,0,"*"],[301,178,0,89,2,"IMAGE"],[302,178,0,167,0,"*"],[303,175,0,10,0,"IMAGE"],[305,72,0,181,0,"*"],[306,181,0,174,0,"BUS"]],"groups":[{"title":"Final Detailer","bounding":[4893,-809,810,1626],"color":"#A88","font_size":50,"locked":false},{"title":"Segmenting for Facemasking","bounding":[2524,1014,1300,855],"color":"#b06634","font_size":24,"locked":false},{"title":"Defining Different Facial Expressions","bounding":[1244,-377,901,1130],"color":"#8A8","font_size":24,"locked":false},{"title":"Controlnets","bounding":[2266,-1727,902,989],"color":"#3f789e","font_size":24,"locked":false},{"title":"Main expressions generation","bounding":[3002,-522,1803,1431],"color":"#3f789e","font_size":24,"locked":false},{"title":"Results compare","bounding":[5429,861,1445,1080],"color":"#b58b2a","font_size":24,"locked":false}],"config":{},"extra":{},"version":0.4}